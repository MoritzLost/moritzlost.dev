---
import type { HTMLAttributes } from 'astro/types';
import GithubSlugger from 'github-slugger';

type Props = HTMLAttributes<'section'> & {
    headline?: string;
    headlineId?: string;
    background?: 'secondary' | 'secondary-dark';
    container?: boolean;
    classes?: string | string[];
};

const { headline, headlineId, container = true, classes = [], ...attributes } = Astro.props;

const slugger = new GithubSlugger();
const ariaLabelledBy = headline ? headlineId ?? slugger.slug(headline) : null;
---

<section {...attributes} aria-labelledby={ariaLabelledBy} class:list={[{ container }, classes]}>
    {headline && <h2 id={headlineId}>{headline}</h2>}
    <div class="article">
        <slot />
    </div>
</section>

<style lang="postcss">
    section {
        &.container {
            --container-padding-x: 1.5rem;

            width: 100%;
            display: grid;
            justify-content: space-between;
            justify-items: center;
            grid-template-areas: '. content .';

            grid-template-columns:
                [fullwidth-start]
                var(--container-padding-x)
                [content-start]
                minmax(0, auto)
                [content-end]
                var(--container-padding-x)
                [fullwidth-end];

            > :global(*) {
                grid-column: content-start / content-end;
            }
        }
    }
</style>
